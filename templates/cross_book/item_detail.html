{% extends 'shared/base.html' %}
{% load static %}
{% block title %}商品詳細ページ{% endblock %}
{% block content %}
    <div class="item-detail-page">
        <div class="item-detail-page-content">
            <div class="item-image-part">
                <div class="heading-image">
                    <div class="item-image-wrapper">
                        <img src="{{ thumbnail.image.url }}" id="featured" class="item-image">
                    </div>
                </div>
                <div class="image-preview-zone">
                    {% for item_image in item_images %}
                        {% if forloop.counter == 1 %}
                            <div class="item-image-wrapper">
                                <img src="{{ thumbnail.image.url }}" class="item-image select-image active_img">
                            </div>
                        {% else %}
                            <div class="item-image-wrapper">
                                <img src="{{ item_image.image.url }}" class="item-image select-image">
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            <div class="item-detail-part">
                <table class="table table-striped">
                    <tr>
                        <th>商品名</th>
                        <td>{{ item.name }}</td>
                    </tr>
                    <tr>
                        <th>出品者からの一言</th>
                        <td>{{ item.explanation }}</td>
                    </tr>
                    <tr>
                        <th>配送地</th>
                        <td>{{ item.get_shipping_area_display }}</td>
                    </tr>
                    <tr>
                        <th>配送日数</th>
                        <td>{{ item.get_shipping_day_display }}</td>
                    </tr>
                    <tr>
                        <th>出品日</th>
                        <td>{{ item.at_created }}</td>
                    </tr>
                </table>

            </div>
        </div>
    </div>
{% endblock %}
{% block script %}
    <script>
        let selectImage = document.getElementsByClassName('select-image')
        let activeImage = document.getElementsByClassName('active_img')
        for (var i = 0; i < selectImage.length; i++) {
            console.log(activeImage)
            selectImage[i].addEventListener('click', function () {
                if (activeImage.length > 0) {
                    activeImage[0].classList.remove('active_img')
                }
                this.classList.add('active_img')
                document.getElementById('featured').src = this.src
            })
        }
    </script>
{% endblock %}